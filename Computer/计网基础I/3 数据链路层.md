## 一  知识结构

#### 1  数据链路层的作用

1.1  数据链路和帧
1.2  封装成帧
1.3  透明传输
	1.3.1  字符填充
1.4  差错检测
	1.4.1  循环冗余检验
	1.4.2  无差错接收和可靠传输

#### 2  点对点协议PPP

2.1  PPP协议的需求
2.2  PPP协议的组成
2.3  PPP协议的帧格式
	2.3.1  各字段的意义
	2.3.2  字节填充
	2.3.3  零比特填充
2.4  PPP协议的工作状态

#### 3  CSMA/CD协议

3.1  CSMA/CD协议的概念
3.2  数据碰撞
3.3  争用期
3.4  截断二进制指数退避算法
3.5  CSMA/CD协议的核心要点

#### 4  以太网

4.1  局域网的特点
4.2  以太网的两个主要标准
4.3  适配器
4.4  以太网的通信特点
4.5  使用集线器的星形拓扑
4.6  以太网的信道利用率
4.7  以太网的MAC地址
	4.7.1  MAC地址规范
	4.7.2  识别MAC地址
4.8  以太网的MAC帧
	4.8.1  MAC帧的格式

#### 5  扩展以太网

5.1  在物理层扩展以太网
5.2  交换式以太网
	5.2.1  以太网交换机
	5.2.2  自学习功能
5.3  虚拟局域网
5.4  以太网的优势

#### 6  高速以太网

6.1  100BASE-T以太网
6.2  吉比特以太网
6.3  更快的以太网
6.4  使用以太网进行宽带接入

## 二  主要内容

​	数据链路层是五层协议的体系结构的第二层。数据链路层的主要作用是：将网络层传送的数据添加首部和尾部封装成帧，使用物理层提供的数据传送服务，将帧水平地传送给相邻节点的数据链路层。传送数据时还需要考虑透明传输的问题，并进行必要的差错检测。数据链路层的主要协议是PPP协议和CSMA/CD协议。数据链路层工作在单个网络中，不需要经过路由器存储转发数据，因此局域网属于数据链路层。在数据链路层工作的以太网拥有巨大的优势，因而已经成为了当今主流的局域网，并逐步应用到城域网和广域网。

​	数据链路是在物理链路上增加实现数据链路层协议的软硬件得到的，最常用的方法是使用网络适配器。数据链路层将网络层传送的数据添加首部和尾部封装成帧，在数据链路上传送；每个数据链路层协议都需要规定具体的帧格式。帧格式中一般有帧定界符，为保证透明传输，一般使用插入转义字符的字符填充法。数据链路层还需要对帧进行差错检测，最常用的方法是循环冗余检验CRC。CRC只检错而不纠错，数据链路层把检出差错的帧直接丢弃。需要注意，数据链路层只检测比特差错而不检测其他差错，因此只能保证无差错接收，但不能保证可靠传输。

​	点对点协议PPP是用户计算机和ISP进行通信时使用的数据链路层协议。IETF为设计PPP协议提出了一系列需求，并根据这些需求设计PPP协议。PPP协议规定了帧格式。为保证透明传输，PPP协议在异步传输时使用字节填充法，在同步传输时使用零比特填充法。PPP协议在工作时，需要先建立物理层、LCP链路、NCP链路的连接，经过一系列的状态转换和连接建立，才能在某种稳定状态下连续传输数据。

​	CSMA/CD协议是总线通信的以太网的协议，该协议主要解决共享信道的随机接入的问题。CSMA/CD协议的概念是载波监听多点接入/碰撞检测。由于电磁波在总线上总是以有限的速率传播的，数据发送就有可能发生碰撞。一个站点在发送数据的一段时间后才能确定碰撞是否一定发生，这段时间称为争用期，争用期的长度是两倍的总线端到端传播时延。为解决数据碰撞问题，CSMA/CD协议使用截断二进制指数退避算法。强化碰撞和帧间最小间隔也是很重要的概念。本节最后总结了CSMA/CD协议的核心要点。

​	局域网的主要特点是：网络为一个单位所拥有，且地理范围和站点数目均有限；网络不使用路由器传送数据。局域网可以有各种拓扑结构，其共享信道主要使用多点接入的随机接入方式。以太网的两个主要标准是非官方标准DIX Ethernet V2和官方标准IEEE 802.3，前者已经成为了使用最广泛的事实标准。适配器是连接计算机和局域网的物理器件；适配器实现了数据链路层的协议，在适配器中还固化写入了MAC地址。以太网可以使用工作在物理层的集线器构造星形拓扑结构，由此出现了10BASE-T双绞线以太网，这是局域网发展史上的一个里程碑。
​	以太网通信的主要特点有三个：其一是使用无连接的工作方式和尽最大努力的交付，其二是使用共享信道总线传送数据，其三是使用曼彻斯特编码的信号实现位同步。以太网的一个重要参数是单程端到端传播时延与帧的发送时间之比，为提高以太网的信道利用率，该参数的值越小越好；为减小该参数的值，需要缩短以太网的连线长度或增大以太网的帧长。
​	以太网的MAC地址实质是每一个站点的标识符，通常固化写入适配器的ROM中。MAC地址的高位是组织唯一标识符OUI，由IEEE的注册管理机构RA分配；低位是扩展标识符，由购买OUI的厂家自行指派。MAC地址的最低有效位为I/G位，用于表示单个站地址和组地址。一个站点收到数据链路层的帧后，将其目的地址和自己的MAC地址比较，就能知道该帧是否是发送给本站的。以太网适配器还可以设置为混杂方式工作。
​	以太网规定了帧格式，称之为MAC帧。MAC帧由目的地址、原地址、协议类型、数据字段、帧检验序列FCS构成。MAC帧不需要帧定界符和帧长度字段，而需要前同步码和帧开始定界符，但它们不是MAC帧的一部分。不满足条件的MAC帧会成为无效的MAC帧，被接收到帧的站点丢弃。

​	有多种方式扩展以太网。可以使用集线器在物理层扩展以太网，连成多级星形结构的以太网；如果需要扩大以太网的范围，可以使用光纤。这种扩展方式有优点也有缺点，当今基本被优势更大的交换式以太网取代。
​	交换式以太网以以太网交换机为核心节点。以太网交换机以全双工方式工作，还具有并行性，允许多对站点同时通信，每对站点独占传输媒体，无碰撞地传输数据。此外，交换机还有缓存帧、即插即用、自学习等优点。交换机使用自学习算法发送帧，使得以太网交换机能即插即用且不需要人工配置。交换机的出现大大提高了以太网的数据传输率和覆盖范围，且其成本和性能均有优势，因而迅速取代了集线器和网桥。
​	虚拟局域网是交换式以太网提供的服务，而不是新的局域网。以太网包含太多计算机会出现效率和安全问题，于是需要使用虚拟局域网。工作人员可以在交换机中设置虚拟局域网，将同一个交换式以太网的若干站点组成一个虚拟局域网，每个虚拟局域网成为一个广播域。交换机通过在以太网帧中插入、识别和删除VLAN标签来工作。
​	以太网由于实践成熟、互操作性好、成本低、适应多种传输媒体、帧格式统一、管理简单等优点，已经得到了广泛应用，并逐步向城域网和广域网进军。以太网几乎成为了局域网的同义词。

​	在经典的10BASE-T以太网之后，又出现了多种以太网：100BASE-T以太网，吉比特以太网，以及更快的以太网。使用以太网进行宽带接入的技术也在研究，典型成果是PPPoE协议。

## 三  重点梳理

- 理解数据链路层的三大功能：封装成帧、透明传输、差错检测。
- 理解并掌握循环冗余检验CRC。
- 理解PPP协议的帧格式和工作状态。
- 理解CSMA/CD协议，理解并掌握数据碰撞和争用期，理解并掌握截断二进制指数退避算法。
- 理解以太网的通信特点，理解以太网的MAC帧。
- 理解交换式以太网，理解以太网交换机及其自学习功能。
- 理解虚拟局域网。

## 四  难点解析

#### 1  数据链路层的作用是什么？数据链路层的封装成帧、透明传输、差错检测是怎样实现的？

#### 2  点对点协议PPP的内容是什么？PPP帧的帧格式是怎样的？PPP协议是如何工作的？

#### 3  CSMA/CD协议的概念和核心要点是什么？

#### 4  在以太网中，数据碰撞是怎样发生的？什么是争用期，它的意义是什么？

#### 5  CSMA/CD协议怎样使用截断二进制指数退避算法解决数据碰撞问题？

#### 6  以太网交换机有什么特点和功能？如何在数据链路层上扩展交换式以太网？

#### 7  以太网交换机的自学习功能是如何实现的？

#### 8  什么是虚拟局域网？交换式以太网如何提供虚拟局域网的服务？

#### 9  以太网的主要优势有哪些？

## 五  重要图表

- P73  数据链路层的作用
  ![数据链路层的作用](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\数据链路层的作用.png)
- P74  封装成帧
  ![封装成帧](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\封装成帧.png)
- **P77  循环冗余检验CRC**
  ![循环冗余检验CRC](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\循环冗余检验CRC.png)
- **P81  PPP帧的格式**
  ![PPP帧的格式](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\PPP帧的格式.png)
- **P82  PPP协议的工作状态**
  ![PPP协议的工作状态](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\PPP协议的工作状态.png)
- **P89  数据碰撞**
  ![数据碰撞](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\数据碰撞.png)
- P91  强化碰撞
  ![强化碰撞](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\强化碰撞.png)
- P94  以太网的信道利用率
  ![以太网的信道利用率](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\以太网的信道利用率.png)
- **P98  MAC帧的格式**
  ![MAC帧的格式](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\MAC帧的格式.png)
- **P102  以太网交换机的自学习功能**
  ![以太网交换机的自学习功能](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\以太网交换机的自学习功能.png)
- P103  交换式以太网的兜圈子现象
  ![交换式以太网的兜圈子现象](D:\Learn\Note\Computer\计网基础I\Image\3 数据链路层\交换式以太网的兜圈子现象.png)
- **P105  虚拟局域网**
  暂缺

## 六  薄弱点清单



------

