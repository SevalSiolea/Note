## 一  知识结构

#### 1  IoC容器和Bean简介

#### 2  容器概述

2.1  配置元数据
2.2  XML作为外部配置DSL
2.3  组合基于XML的配置元数据
2.4  使用容器

#### 3  Bean概述

3.1  命名Bean
3.2  实例化Bean
	3.2.1  使用构造方法实例化
	3.2.2  使用静态工厂方法实例化
	3.2.3  使用实例工厂方法实例化
3.3  确定Bean的运行时类型

#### 4  依赖项注入

4.1  基于构造函数的依赖项注入
4.2  基于Setter的依赖项注入
4.3  依赖项解析过程

#### 5  Bean作用域

5.1  单例作用域
5.2  原型作用域
5.3  自定义范围

#### 6  Bean的生命周期

6.1  初始化回调
6.2  销毁回调
6.3  默认初始化和销毁方法
6.4  组合生命周期机制
6.5  启动和关闭回调

#### 7  Bean定义继承

#### 8  基于注解的容器配置

8.1  使用 `@Autowired`

#### 9  基于Java的容器配置

9.1  `@Bean` 和 `@Configuration`
9.2  使用 `@Bean`
9.3  使用 `@Configuration`

## 二  主要内容

​	依赖注入DI和控制反转IoC是Spring的基本概念。Spring把管理对象的职责交给IoC容器，并由IoC容器负责向对象中注入依赖项。IoC容器管理的对象称为Bean。

​	IoC容器管理对象的基本接口是`BeanFactory`。`ApplicationContext`接口扩展了`BeanFactory`接口，作为本章主要学习的IoC容器。容器通过读取配置元数据来获得Bean的依赖项，并由此配置Bean。配置元数据可以写在XML配置文件中，也可以使用注解或使用Java注解配置。实例化容器之后，就可以使用容器中的Bean了。
​	使用XML配置元数据时，Bean定义在`<bean>`元素中，定义了标识、名称、作用域等依赖项。可以在XML中配置Bean之间的依赖，一个Bean的定义也可以分布在几个XML配置文件中。

​	Bean是IoC容器管理的对象。Bean可以有一个或多个名称，用`id`属性和`name`属性指定。实例化Bean有多种方式，可以使用构造方法、静态工厂方法、实例工厂方法实例化。采用何种方法实例化Bean以及实例化参数也写在XML配置文件中。使用Bean时，确定Bean的运行时类型并非易事。

​	注入Bean的依赖项有两种基本的方法：其一是在实例化Bean时同时注入Bean的依赖项，其二是先实例化Bean，再调用相应方法注入依赖项。多种方法可以配合使用，Spring能够自动完成依赖项解析。

​	Spring为Bean提供了比Java语言更加丰富的作用域。基本的作用域是`singleton`和`prototype`，分别表示某个Bean有单个对象和多个对象。还有四种作用域只在Web中使用。用户也可以自行定义作用域。

​	Spring允许在Bean的生命周期中，在不同的时间段执行不同的动作。例如，在初始化和销毁时，通过实现特定的方法就可以指定相应的动作。也可以为所有的Bean指定默认初始化和销毁方法。如果Bean有自身生命周期要求，则可以实现`Lifecycle`接口，以在生命周期中收到启动和停止信号时执行指定的动作。

​	Bean有继承层次结构。子Bean可以从父Bean处继承某些依赖项，当然也可以覆盖他们或增加新的依赖项。

​	Spring允许使用注解来配置IoC容器。基本的注解是`@Autowired`，它指定了必需的依赖项，可以用于各种方法和字段上。还可以使用基于Java的容器配置。基本的注解是，`@Configuration`注解用于类，定义Bean的来源；而`@Bean`注解用于方法，该方法返回一个返回类型的Bean对象；换言之，一个方法就是一个Bean定义。

## 三  重点梳理

- 理解IoC容器，掌握使用XML配置元数据，掌握如何使用IoC容器。
- 理解Bean，掌握实例化Bean的方法。
- 理解并掌握依赖项注入。
- 理解Bean的作用域，理解单例作用域和原型作用域，了解自定义作用域。
- 理解和掌握Bean的生命周期，掌握如何在Bean的生命周期中执行动作。
- 理解和掌握如何使用注解配置IoC容器。

## 四  难点解析

#### 1  如何理解依赖注入DI和控制反转IoC？

#### 2  如何实例化Bean？讲解构造方法、静态工厂方法、实例工厂方法三种方式。

#### 3  如何进行Bean的依赖项注入？Spring如何解析依赖项注入过程？

#### 4  如何使用Bean的自定义作用域？

#### 5  如何在Bean的生命周期中执行动作？

#### 6  如何使用注解进行容器配置？如何使用`@Autowired`注解？

## 五  重要图表

无

## 六  薄弱点清单



------

